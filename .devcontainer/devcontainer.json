{
	"$schema": "https://raw.githubusercontent.com/devcontainers/spec/refs/heads/main/schemas/devContainer.schema.json",
	"name": "Zitadel Devcontainer",
	"dockerComposeFile": "docker-compose.yaml",
	"service": "devcontainer",
	"runServices": [
		"devcontainer"
	],
	"workspaceFolder": "/workspaces/zitadel",
	"forwardPorts": [
		"db:5432",
		"login-api-mock:22220",
		"login-api-mock:22222",
		"login:3000",
		"console:4200",
		"api:8080"
	],
	"updateContentCommand": {
		"goModules": "go mod download || true",
		"nodeModules": "pnpm install || true; pnpm add -g nx || true; cd apps/login && pnpm cypress install || true"
	},
	"features": {
		"ghcr.io/devcontainers/features/go:1": {
			"version": "1.24"
		},
		"ghcr.io/guiyomh/features/golangci-lint:0": {},
		"ghcr.io/jungaretti/features/make:1": {},
		"ghcr.io/devcontainers/features/docker-outside-of-docker": {},
		"ghcr.io/devcontainers-extra/features/pnpm:2": {
			"version": "10.13.1"
		}
	},
	"customizations": {
        "vscode": {
            "extensions": [
                "golang.Go",
				"nrwl.angular-console"
            ]
        }
    }
}